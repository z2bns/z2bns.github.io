---
title: æœ‰å¤šå°‘å°äºå½“å‰æ•°å­—çš„æ•°å­—
date: 2020-11-09 12:34:28
mathjax: true
categories:
- ACM
- LeetCode
tags:
- ç®—æ³•
- ç®€å•
---

**[é¢˜ç›®åœ°å€](https://leetcode-cn.com/problems/how-many-numbers-are-smaller-than-the-current-number/)**

**éš¾åº¦ï¼š**â­

###### **é¢˜ç›®æè¿°ï¼š**

ç»™ä½ ä¸€ä¸ªæ•°ç»„ `nums`ï¼Œå¯¹äºå…¶ä¸­æ¯ä¸ªå…ƒç´  `nums[i]`ï¼Œè¯·ä½ ç»Ÿè®¡æ•°ç»„ä¸­æ¯”å®ƒå°çš„æ‰€æœ‰æ•°å­—çš„æ•°ç›®ã€‚

æ¢è€Œè¨€ä¹‹ï¼Œå¯¹äºæ¯ä¸ª `nums[i]` ä½ å¿…é¡»è®¡ç®—å‡ºæœ‰æ•ˆçš„ `j` çš„æ•°é‡ï¼Œå…¶ä¸­ `j` æ»¡è¶³ `j != i` **ä¸”** `nums[j] < nums[i]` ã€‚

ä»¥æ•°ç»„å½¢å¼è¿”å›ç­”æ¡ˆã€‚

<!-- more -->

**ç¤ºä¾‹1ï¼š**

```
è¾“å…¥ï¼šnums = [8,1,2,2,3]
è¾“å‡ºï¼š[4,0,1,1,3]
è§£é‡Šï¼š 
å¯¹äº nums[0]=8 å­˜åœ¨å››ä¸ªæ¯”å®ƒå°çš„æ•°å­—ï¼šï¼ˆ1ï¼Œ2ï¼Œ2 å’Œ 3ï¼‰ã€‚ 
å¯¹äº nums[1]=1 ä¸å­˜åœ¨æ¯”å®ƒå°çš„æ•°å­—ã€‚
å¯¹äº nums[2]=2 å­˜åœ¨ä¸€ä¸ªæ¯”å®ƒå°çš„æ•°å­—ï¼šï¼ˆ1ï¼‰ã€‚ 
å¯¹äº nums[3]=2 å­˜åœ¨ä¸€ä¸ªæ¯”å®ƒå°çš„æ•°å­—ï¼šï¼ˆ1ï¼‰ã€‚ 
å¯¹äº nums[4]=3 å­˜åœ¨ä¸‰ä¸ªæ¯”å®ƒå°çš„æ•°å­—ï¼šï¼ˆ1ï¼Œ2 å’Œ 2ï¼‰ã€‚
```

**ç¤ºä¾‹2ï¼š**

```
è¾“å…¥ï¼šnums = [6,5,4,8]
è¾“å‡ºï¼š[2,1,0,3]
```

**ç¤ºä¾‹3ï¼š**

```
è¾“å…¥ï¼šnums = [7,7,7,7]
è¾“å‡ºï¼š[0,0,0,0]
```

**æç¤ºï¼š**

- `2 <= nums.length <= 500`
- `0 <= nums[i] <= 100`



<center>ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸è§£é¢˜è¿‡ç¨‹ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸</center>

###### è§£é¢˜è¿‡ç¨‹ï¼š

**æ€è·¯ï¼š**

éå†æ•°ç»„numsï¼Œå¯¹æ¯ä¸€ä¸ªå…ƒç´ å’Œæ•°ç»„numsä¸­çš„æ‰€æœ‰å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå¤§äºåˆ™æ•°ç›®åŠ 1ã€‚

**c++ä»£ç ï¼š**(æ‰§è¡Œç”¨æ—¶68msï¼Œå‡»è´¥17.74%ï¼Œå†…å­˜æ¶ˆè€—10.1Mï¼Œå‡»è´¥77.40%ï¼‰

```c++
class Solution {
public:
    vector<int> smallerNumbersThanCurrent(vector<int>& nums) {
        vector<int> result;
        int num;
        for(int i=0;i<nums.size();++i){
            num=0;
            for(int j=0;j<nums.size();++j){
                if(nums[j]<nums[i]){
                    ++num;
                }
            }
            result.push_back(num);
        }
    return result;
    }
};
```



<center>ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’å®˜ æ–¹ é¢˜ è§£ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’</center>

###### [å®˜æ–¹é¢˜è§£:](https://leetcode-cn.com/problems/how-many-numbers-are-smaller-than-the-current-number/solution/you-duo-shao-xiao-yu-dang-qian-shu-zi-de-shu-zi--2/)

**æ–¹æ³•ä¸€ï¼šæš´åŠ›**
æ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„ä¸€ä¸ªæ–¹æ³•æ˜¯ï¼Œå¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬éƒ½éå†æ•°ç»„ä¸€æ¬¡ï¼Œç»Ÿè®¡å°äºå½“å‰å…ƒç´ çš„æ•°çš„æ•°ç›®ã€‚

**c++ä»£ç ï¼š**ï¼ˆæ‰§è¡Œ16msï¼Œå‡»è´¥56.92%ï¼Œå†…å­˜10.7Mï¼Œå‡»è´¥7.63%ï¼‰

```c++
class Solution {
public:
    vector<int> smallerNumbersThanCurrent(vector<int>& nums) {
        vector<int> ret;
        int n = nums.size();
        for (int i = 0; i < n; i++) {
            int cnt = 0;
            for (int j = 0; j < n; j++) {
                if (nums[j] < nums[i]) {
                    cnt++;
                }
            }
            ret.push_back(cnt);
        }
        return ret;
    }
};
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(N^2)$ï¼Œå…¶ä¸­ $N$ ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚æ³¨æ„æˆ‘ä»¬ä¸è®¡ç®—ç­”æ¡ˆæ•°ç»„çš„ç©ºé—´å ç”¨ã€‚

**æ–¹æ³•äºŒï¼šå¿«é€Ÿæ’åº**
æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†æ•°ç»„æ’åºï¼Œå¹¶è®°å½•æ¯ä¸€ä¸ªæ•°åœ¨åŸæ•°ç»„ä¸­çš„ä½ç½®ã€‚å¯¹äºæ’åºåçš„æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ•°ï¼Œæˆ‘ä»¬æ‰¾å‡ºå…¶å·¦ä¾§ç¬¬ä¸€ä¸ªå°äºå®ƒçš„æ•°ï¼Œè¿™æ ·å°±èƒ½å¤ŸçŸ¥é“æ•°ç»„ä¸­å°äºè¯¥æ•°çš„æ•°é‡ã€‚

**c++ä»£ç ï¼š**ï¼ˆæ‰§è¡Œ32msï¼Œå‡»è´¥36.78%ï¼Œå†…å­˜10.7Mï¼Œå‡»è´¥7.90%ï¼‰

```c++
class Solution {
public:
    vector<int> smallerNumbersThanCurrent(vector<int>& nums) {
        vector<pair<int, int>> data;
        int n = nums.size();
        for (int i = 0; i < n; i++) {
            data.emplace_back(nums[i], i);
        }
        sort(data.begin(), data.end());

        vector<int> ret(n, 0);
        int prev = -1;
        for (int i = 0; i < n; i++) {
            if (prev == -1 || data[i].first != data[i - 1].first) {
                prev = i;
            }
            ret[data[i].second] = prev;
        }
        return ret;
    }
};
```

å¤æ‚åº¦åˆ†æ

æ—¶é—´å¤æ‚åº¦ï¼š$O(Nlog N)$ï¼Œå…¶ä¸­ $N$ ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚æ’åºéœ€è¦ $O(Nlog N)$çš„æ—¶é—´ï¼Œéšåéœ€è¦ $O(N)$ æ—¶é—´æ¥éå†ã€‚

ç©ºé—´å¤æ‚åº¦ï¼š$O(N)$ã€‚å› ä¸ºè¦é¢å¤–å¼€è¾Ÿä¸€ä¸ªæ•°ç»„ã€‚

**æ–¹æ³•ä¸‰ï¼šè®¡æ•°æ’åº**
æ³¨æ„åˆ°æ•°ç»„å…ƒç´ çš„å€¼åŸŸä¸º \[0,100]ï¼Œæ‰€ä»¥å¯ä»¥è€ƒè™‘å»ºç«‹ä¸€ä¸ªé¢‘æ¬¡æ•°ç»„ $cnt$ ï¼Œ$cnt[i]$ è¡¨ç¤ºæ•°å­— $i$ å‡ºç°çš„æ¬¡æ•°ã€‚é‚£ä¹ˆå¯¹äºæ•°å­— $i$iè€Œè¨€ï¼Œå°äºå®ƒçš„æ•°ç›®å°±ä¸º $cnt[0...i-1]$ çš„æ€»å’Œã€‚

**c++ä»£ç ï¼š**ï¼ˆæ‰§è¡Œ12msï¼Œå‡»è´¥73.62%ï¼Œå†…å­˜10.3Mï¼Œå‡»è´¥39.54%ï¼‰

```c++
class Solution {
public:
    vector<int> smallerNumbersThanCurrent(vector<int>& nums) {
        vector<int> cnt(101, 0);
        int n = nums.size();
        for (int i = 0; i < n; i++) {
            cnt[nums[i]]++;
        }
        for (int i = 1; i <= 100; i++) {
            cnt[i] += cnt[i - 1];
        }
        vector<int> ret;
        for (int i = 0; i < n; i++) {
            ret.push_back(nums[i] == 0 ? 0: cnt[nums[i]-1]);
        }
        return ret;
    }
};
```

**å¤æ‚åº¦åˆ†æ**

æ—¶é—´å¤æ‚åº¦ï¼š$O(N + K)$ï¼Œå…¶ä¸­ $K$ä¸ºå€¼åŸŸå¤§å°ã€‚éœ€è¦éå†ä¸¤æ¬¡åŸæ•°ç»„ï¼ŒåŒæ—¶éå†ä¸€æ¬¡é¢‘æ¬¡æ•°ç»„ $cnt$ æ‰¾å‡ºå‰ç¼€å’Œã€‚

ç©ºé—´å¤æ‚åº¦ï¼š$O(K)$ã€‚å› ä¸ºè¦é¢å¤–å¼€è¾Ÿä¸€ä¸ªå€¼åŸŸå¤§å°çš„æ•°ç»„ã€‚



<center>â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³æ€» ç»“â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³</center>

###### æ€»ç»“ï¼š

è¿˜æ˜¯æœ€ç›´è§‚çš„æš´åŠ›æ–¹æ³•æœ€å¥½æƒ³ï¼Œå®˜æ–¹é¢˜è§£æœ‰å¤šç§åšæ³•ã€‚æäº¤åçš„æ‰§è¡Œç”¨æ—¶æ³¢åŠ¨ä¹ŸæŒºå¤§çš„ã€‚