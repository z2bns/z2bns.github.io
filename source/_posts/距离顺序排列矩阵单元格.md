---
title: è·ç¦»é¡ºåºæ’åˆ—çŸ©é˜µå•å…ƒæ ¼
date: 2020-11-24 09:56:24
mathjax: true
categories:
- ACM
- LeetCode
tags:
- ç®—æ³•
- ç®€å•
---

**[é¢˜ç›®åœ°å€](https://leetcode-cn.com/problems/flipping-an-image/)**

**éš¾åº¦ï¼š**â­

###### **é¢˜ç›®æè¿°ï¼š**

ç»™å‡º `R` è¡Œ `C` åˆ—çš„çŸ©é˜µï¼Œå…¶ä¸­çš„å•å…ƒæ ¼çš„æ•´æ•°åæ ‡ä¸º `(r, c)`ï¼Œæ»¡è¶³ `0 <= r < R` ä¸” `0 <= c < C`ã€‚

å¦å¤–ï¼Œæˆ‘ä»¬åœ¨è¯¥çŸ©é˜µä¸­ç»™å‡ºäº†ä¸€ä¸ªåæ ‡ä¸º `(r0, c0)` çš„å•å…ƒæ ¼ã€‚

è¿”å›çŸ©é˜µä¸­çš„æ‰€æœ‰å•å…ƒæ ¼çš„åæ ‡ï¼Œå¹¶æŒ‰åˆ° `(r0, c0)` çš„è·ç¦»ä»æœ€å°åˆ°æœ€å¤§çš„é¡ºåºæ’ï¼Œå…¶ä¸­ï¼Œä¸¤å•å…ƒæ ¼`(r1, c1)` å’Œ `(r2, c2)` ä¹‹é—´çš„è·ç¦»æ˜¯æ›¼å“ˆé¡¿è·ç¦»ï¼Œ`|r1 - r2| + |c1 - c2|`ã€‚ï¼ˆä½ å¯ä»¥æŒ‰ä»»ä½•æ»¡è¶³æ­¤æ¡ä»¶çš„é¡ºåºè¿”å›ç­”æ¡ˆã€‚ï¼‰

<!-- more -->

**ç¤ºä¾‹1ï¼š**

```
è¾“å…¥ï¼šR = 1, C = 2, r0 = 0, c0 = 0
è¾“å‡ºï¼š[[0,0],[0,1]]
è§£é‡Šï¼šä» (r0, c0) åˆ°å…¶ä»–å•å…ƒæ ¼çš„è·ç¦»ä¸ºï¼š[0,1]
```

**ç¤ºä¾‹2ï¼š**

```
è¾“å…¥ï¼šR = 2, C = 2, r0 = 0, c0 = 1
è¾“å‡ºï¼š[[0,1],[0,0],[1,1],[1,0]]
è§£é‡Šï¼šä» (r0, c0) åˆ°å…¶ä»–å•å…ƒæ ¼çš„è·ç¦»ä¸ºï¼š[0,1,1,2]
[[0,1],[1,1],[0,0],[1,0]] ä¹Ÿä¼šè¢«è§†ä½œæ­£ç¡®ç­”æ¡ˆã€‚
```

**ç¤ºä¾‹3ï¼š**

```
è¾“å…¥ï¼šR = 2, C = 3, r0 = 1, c0 = 2
è¾“å‡ºï¼š[[1,2],[0,2],[1,1],[0,1],[1,0],[0,0]]
è§£é‡Šï¼šä» (r0, c0) åˆ°å…¶ä»–å•å…ƒæ ¼çš„è·ç¦»ä¸ºï¼š[0,1,1,2,2,3]
å…¶ä»–æ»¡è¶³é¢˜ç›®è¦æ±‚çš„ç­”æ¡ˆä¹Ÿä¼šè¢«è§†ä¸ºæ­£ç¡®ï¼Œä¾‹å¦‚ [[1,2],[1,1],[0,2],[1,0],[0,1],[0,0]]
```

**æç¤ºï¼š**

1. `1 <= R <= 100`
2. `1 <= C <= 100`
3. `0 <= r0 < R`
4. `0 <= c0 < C`



<center>ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸è§£é¢˜è¿‡ç¨‹ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸</center>

###### è§£é¢˜è¿‡ç¨‹ï¼š

**æ€è·¯ï¼š**

éå†çŸ©é˜µï¼Œè®¡ç®—æ¯ä¸ªå•å…ƒæ ¼ä¸ï¼ˆr0ï¼Œc0ï¼‰çš„æ›¼å“ˆé¡¿è·ç¦»dï¼Œç„¶ådä½œä¸ºé”®ï¼Œå•å…ƒæ ¼çš„åæ ‡ä½œä¸ºå€¼å­˜åˆ°multimapå®¹å™¨ä¸­ï¼Œåˆ©ç”¨multimapå®¹å™¨çš„ç‰¹æ€§ï¼šå®¹å™¨ä¸­å…ƒç´ æŒ‰å…³é”®å­—æ’åºï¼Œå¹¶ä¸”å…è®¸å¤šä¸ªå…³é”®å­—ç›¸åŒã€‚éå†å®Œæˆå¾—åˆ°æŒ‰æ›¼å“ˆé¡¿è·ç¦»å‡åºæ’åºçš„multimapå®¹å™¨ï¼Œéå†multimapæŠŠå€¼ä¾æ¬¡æ”¾åˆ°ç»“æœä¸­ï¼Œæœ€åè¿”å›ã€‚

**c++ä»£ç ï¼š**(æ‰§è¡Œç”¨æ—¶176msï¼Œå‡»è´¥17.98%ï¼Œå†…å­˜æ¶ˆè€—29Mï¼Œå‡»è´¥15.48%ï¼‰

```c++
class Solution {
public:
    vector<vector<int>> allCellsDistOrder(int R, int C, int r0, int c0) {
        vector<vector<int>> result;
        multimap<int,vector<int>> m;
        vector<int> v;
        int d;
        for(int i=0;i<R;++i){
            for(int j=0;j<C;++j){
                v.clear();
                v.emplace_back(i);
                v.emplace_back(j);
                d=abs(r0-i)+abs(c0-j);
                //mapå¯ä»¥ç”¨m[d]=vèµ‹å€¼ï¼Œmultimapä¸èƒ½
                m.insert(pair<int,vector<int>>(d,v));
            }
        }
        for(auto tmp:m){
            result.emplace_back(tmp.second);
        }
        return result;
    }
};
```



<center>ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’å®˜ æ–¹ é¢˜ è§£ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’</center>

###### [å®˜æ–¹é¢˜è§£](https://leetcode-cn.com/problems/matrix-cells-in-distance-order/solution/ju-chi-shun-xu-pai-lie-ju-zhen-dan-yuan-ge-by-leet/):

**æ–¹æ³•ä¸€ï¼šç›´æ¥æ’åº**

**æ€è·¯åŠè§£æ³•**

æœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹æ³•æ˜¯é¦–å…ˆå­˜å‚¨çŸ©é˜µå†…æ‰€æœ‰çš„ç‚¹ï¼Œç„¶åå°†å…¶æŒ‰ç…§å“ˆæ›¼é¡¿è·ç¦»ç›´æ¥æ’åºã€‚

**ä»£ç **

```c++
class Solution {
public:
    vector<vector<int>> allCellsDistOrder(int R, int C, int r0, int c0) {
        vector<vector<int>> ret;
        for (int i = 0; i < R; i++) {
            for (int j = 0; j < C; j++) {
                ret.push_back({i, j});
            }
        }
        sort(ret.begin(), ret.end(), [=](vector<int>& a, vector<int>& b) {
            return abs(a[0] - r0) + abs(a[1] - c0) < abs(b[0] - r0) + abs(b[1] - c0);
        });
        return ret;
    }
};
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(RC \log(RC))$ï¼Œå­˜å‚¨æ‰€æœ‰ç‚¹æ—¶é—´å¤æ‚åº¦ $O(RC)$ï¼Œæ’åºæ—¶é—´å¤æ‚åº¦ $O(RC \log(RC))$ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(log(RC))$ï¼Œå³ä¸ºæ’åºéœ€è¦ä½¿ç”¨çš„æ ˆç©ºé—´ï¼Œä¸è€ƒè™‘è¿”å›å€¼çš„ç©ºé—´å ç”¨ã€‚

**æ–¹æ³•äºŒï¼šæ¡¶æ’åº**

**æ€è·¯åŠè§£æ³•**

æ³¨æ„åˆ°æ–¹æ³•ä¸€ä¸­æ’åºçš„æ—¶é—´å¤æ‚åº¦å¤ªé«˜ã€‚å®é™…åœ¨æšä¸¾æ‰€æœ‰ç‚¹æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŒ‰ç…§å“ˆæ›¼é¡¿è·ç¦»åˆ†æ¡¶ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å®ç°çº¿æ€§çš„æ¡¶æ’åºã€‚

**ä»£ç **

```c++
class Solution {
public:
    int dist(int r1, int c1, int r2, int c2) {
        return abs(r1 - r2) + abs(c1 - c2);
    }

    vector<vector<int>> allCellsDistOrder(int R, int C, int r0, int c0) {
        int maxDist = max(r0, R - 1 - r0) + max(c0, C - 1 - c0);
        vector<vector<vector<int>>> bucket(maxDist + 1);

        for (int i = 0; i < R; i++) {
            for (int j = 0; j < C; j++) {
                int d = dist(i, j, r0, c0);
                vector<int> tmp = {i, j};
                bucket[d].push_back(move(tmp));
            }
        }
        vector<vector<int>> ret;
        for (int i = 0; i <= maxDist; i++) {
            for (auto &it : bucket[i]) {
                ret.push_back(it);
            }
        }
        return ret;
    }
};
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(RC)$ï¼Œå­˜å‚¨æ‰€æœ‰ç‚¹æ—¶é—´å¤æ‚åº¦ $O(RC)$ï¼Œæ¡¶æ’åºæ—¶é—´å¤æ‚åº¦ $O(RC)$ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(RC)$ï¼Œéœ€è¦å­˜å‚¨çŸ©é˜µå†…æ‰€æœ‰ç‚¹ã€‚

**æ–¹æ³•ä¸‰ï¼šå‡ ä½•æ³•**

**æ€è·¯åŠè§£æ³•**

æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥å˜æ¢æšä¸¾çŸ©é˜µçš„é¡ºåºï¼Œç›´æ¥æŒ‰ç…§æ›¼å“ˆé¡¿è·ç¦»éå†è¯¥çŸ©å½¢å³å¯ã€‚

æ³¨æ„åˆ°æ›¼å“ˆé¡¿è·ç¦»ç›¸åŒçš„ä½ç½®æ°å¥½æ„æˆä¸€ä¸ªæ–œç€çš„æ­£æ–¹å½¢è¾¹æ¡†ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä»å°åˆ°å¤§æšä¸¾æ›¼å“ˆé¡¿è·ç¦»ï¼Œå¹¶ä½¿ç”¨å¾ªç¯æ¥ç›´æ¥æšä¸¾è¯¥è·ç¦»å¯¹åº”çš„è¾¹æ¡†ã€‚æˆ‘ä»¬æ¯æ¬¡ä»è¯¥æ­£æ–¹å½¢è¾¹æ¡†çš„ä¸Šé¡¶ç‚¹å‡ºå‘ï¼Œä¾æ¬¡ç»è¿‡å³é¡¶ç‚¹ã€ä¸‹é¡¶ç‚¹å’Œå·¦é¡¶ç‚¹ï¼Œæœ€åå›åˆ°ä¸Šé¡¶ç‚¹ã€‚è¿™æ ·å³å¯å®Œæˆå½“å‰å±‚çš„éå†ã€‚

![fig1](%E8%B7%9D%E7%A6%BB%E9%A1%BA%E5%BA%8F%E6%8E%92%E5%88%97%E7%9F%A9%E9%98%B5%E5%8D%95%E5%85%83%E6%A0%BC/1.png)

æ³¨æ„æ­£æ–¹å½¢è¾¹æ¡†ä¸­çš„éƒ¨åˆ†ç‚¹ä¸ä¸€å®šè½åœ¨çŸ©é˜µä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åšå¥½è¾¹ç•Œåˆ¤æ–­ã€‚

**ä»£ç **

```c++
class Solution {
public:
    const int dr[4] = {1, 1, -1, -1};
    const int dc[4] = {1, -1, -1, 1};

    vector<vector<int>> allCellsDistOrder(int R, int C, int r0, int c0) {
        int maxDist = max(r0, R - 1 - r0) + max(c0, C - 1 - c0);
        vector<vector<int>> ret;
        int row = r0, col = c0;
        ret.push_back({row, col});
        for (int dist = 1; dist <= maxDist; dist++) {
            row--;
            for (int i = 0; i < 4; i++) {
                while ((i % 2 == 0 && row != r0) || (i % 2 != 0 && col != c0)) {
                    if (row >= 0 && row < R && col >= 0 && col < C) {
                        ret.push_back({row, col});
                    }
                    row += dr[i];
                    col += dc[i];
                }
            }
        }
        return ret;
    }
};
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O\big((R+C)^2\big)$ï¼Œæˆ‘ä»¬éœ€è¦éå†çŸ©é˜µå†…æ‰€æœ‰ç‚¹ï¼ŒåŒæ—¶ä¹Ÿä¼šéå†éƒ¨åˆ†è¶…è¿‡çŸ©é˜µéƒ¨åˆ†çš„ç‚¹ã€‚åœ¨æœ€åæƒ…å†µä¸‹ï¼Œç»™å®šçš„å•å…ƒæ ¼ä½äºçŸ©é˜µçš„ä¸€ä¸ªè§’ï¼Œä¾‹å¦‚ $(0,0)$ï¼Œæ­¤æ—¶æœ€å¤§çš„æ›¼å“ˆé¡¿è·ç¦»ä¸º $R+C-2$ï¼Œéœ€è¦éå†çš„ç‚¹æ•°ä¸º $2(R+C-2)(R+C-1)+1$ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º $O\big((R+C)^2\big)$ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ï¼Œä¸è€ƒè™‘è¿”å›å€¼çš„ç©ºé—´å ç”¨ã€‚




<center>â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³æ€» ç»“â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³</center>

###### æ€»ç»“ï¼š

å®˜æ–¹é¢˜è§£ç›´æ¥æ’åºè‡ªå®šä¹‰sortæ’åºè§„åˆ™é‡åˆ°å¥½å‡ æ¬¡äº†ï¼Œè‡ªå·±è¿˜æ˜¯ä¸å¤ªä¼šï¼Œç•™ä½œä»¥åè¡¥å……ï¼Œæ¡¶æ’åºæ–¹æ³•ä¹Ÿæ¯”è¾ƒå¸¸è§ï¼Œè‡³äºç¬¬ä¸‰ç§æ–¹æ³•è¯´å®è¯æ²¡çœ‹æ‡‚ï¼Œä½œä¸ºLeetCodeå®˜æ–¹é¢˜è§£é—ç•™é—®é¢˜ï¼Œä»¥åå›æ¥åšè¡¥å……ã€‚

psï¼šæˆ‘è¦èµ¶ç´§3é“é¢˜æ‰“å®Œå¡å»å­¦æ•°å­¦äº†ï¼Œå•Šå•Šå•ŠğŸ˜®