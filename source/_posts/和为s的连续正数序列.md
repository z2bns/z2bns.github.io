---
title: å’Œä¸ºsçš„è¿ç»­æ­£æ•°åºåˆ—
date: 2020-11-27 13:10:58
mathjax: true
categories:
- ACM
- LeetCode
tags:
- ç®—æ³•
- ç®€å•
---

**[é¢˜ç›®åœ°å€](https://leetcode-cn.com/problems/he-wei-sde-lian-xu-zheng-shu-xu-lie-lcof/)**

**éš¾åº¦ï¼š**â­

###### **é¢˜ç›®æè¿°ï¼š**

è¾“å…¥ä¸€ä¸ªæ­£æ•´æ•° `target` ï¼Œè¾“å‡ºæ‰€æœ‰å’Œä¸º `target` çš„è¿ç»­æ­£æ•´æ•°åºåˆ—ï¼ˆè‡³å°‘å«æœ‰ä¸¤ä¸ªæ•°ï¼‰ã€‚

åºåˆ—å†…çš„æ•°å­—ç”±å°åˆ°å¤§æ’åˆ—ï¼Œä¸åŒåºåˆ—æŒ‰ç…§é¦–ä¸ªæ•°å­—ä»å°åˆ°å¤§æ’åˆ—ã€‚

<!-- more -->

**ç¤ºä¾‹1ï¼š**

```
è¾“å…¥ï¼štarget = 9
è¾“å‡ºï¼š[[2,3,4],[4,5]]
```

**ç¤ºä¾‹2ï¼š**

```
è¾“å…¥ï¼štarget = 15
è¾“å‡ºï¼š[[1,2,3,4,5],[4,5,6],[7,8]]
```

**é™åˆ¶ï¼š**

- `1 <= target <= 10^5`

 

<center>ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸è§£é¢˜è¿‡ç¨‹ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸ğŸ™‹â€â™‚ï¸</center>

###### è§£é¢˜è¿‡ç¨‹ï¼š

**æ€è·¯ï¼š**

éå†æ‰€æœ‰å¯èƒ½çš„é¦–ä¸ªæ•°å­—iï¼Œé¦–æ•°å­—èŒƒå›´æ˜¯$[1ï¼Œ\frac{target}{2}]$,å¯¹æ¯ä¸ªé¦–æ•°å­—å¼€å§‹çš„è¿ç»­æ­£æ•´æ•°åºåˆ—ç´¯åŠ åˆ¤æ–­èƒ½å¦æ‰¾åˆ°å’Œä¸ºtargetçš„ã€‚å¦‚æœå­˜åœ¨åˆ™å½¢æˆä»¥æ•°å­—iå¼€å§‹çš„å’Œä¸ºtargetçš„è¿ç»­æ­£æ•´æ•°åºåˆ—å¹¶å­˜åˆ°ç»“æœé›†ä¸­ã€‚

**c++ä»£ç ï¼š**(æ‰§è¡Œç”¨æ—¶4msï¼Œå‡»è´¥66.56%ï¼Œå†…å­˜æ¶ˆè€—7Mï¼Œå‡»è´¥23.15%ï¼‰

```c++
class Solution {
public:
    vector<vector<int>> findContinuousSequence(int target) {
        vector<vector<int>> result;
        vector<int> tmp;
        //éå†æ‰€æœ‰å¯èƒ½çš„é¦–ä¸ªæ•°å­—
        for(int i=1;i<=target/2;++i){
            int j=i;
            int sum=0;
            while(sum<target){
                sum+=j;
                j++;
            }
            if(sum==target){
                tmp.clear();
                //å½¢æˆå’Œä¸ºtargetçš„è¿ç»­æ­£æ•´æ•°åºåˆ—
                for(int k=i;k<j;++k){
                    tmp.emplace_back(k);
                }
                //æ”¾å…¥ç»“æœé›†ä¸­
                result.emplace_back(tmp);
            }
        }
        return result;
    }
};
```



<center>ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’å®˜ æ–¹ é¢˜ è§£ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’ğŸ’</center>

###### [å®˜æ–¹é¢˜è§£](https://leetcode-cn.com/problems/he-wei-sde-lian-xu-zheng-shu-xu-lie-lcof/solution/mian-shi-ti-57-ii-he-wei-sde-lian-xu-zheng-shu-x-2/):

**æ–¹æ³•ä¸€ï¼šæšä¸¾ + æš´åŠ›**
æšä¸¾æ¯ä¸ªæ­£æ•´æ•°ä¸ºèµ·ç‚¹ï¼Œåˆ¤æ–­ä»¥å®ƒä¸ºèµ·ç‚¹çš„åºåˆ—å’Œ $\textit{sum}$ æ˜¯å¦ç­‰äº $\textit{target}$å³å¯ï¼Œç”±äºé¢˜ç›®è¦æ±‚åºåˆ—é•¿åº¦è‡³å°‘å¤§äº $2$ï¼Œæ‰€ä»¥æšä¸¾çš„ä¸Šç•Œä¸º $\lfloor\frac{\textit{target}}{2}\rfloor$ã€‚

**c++ä»£ç ï¼š**(æ‰§è¡Œç”¨æ—¶8msï¼Œå‡»è´¥27.15%ï¼Œå†…å­˜æ¶ˆè€—6.9Mï¼Œå‡»è´¥35.41%ï¼‰

```c++
class Solution {
public:
    vector<vector<int>> findContinuousSequence(int target) {
        vector<vector<int>> vec;
        vector<int> res;
        int sum = 0, limit = (target - 1) / 2; // (target - 1) / 2 ç­‰æ•ˆäº target / 2 ä¸‹å–æ•´
        for (int i = 1; i <= limit; ++i) {
            for (int j = i;; ++j) {
                sum += j;
                if (sum > target) {
                    sum = 0;
                    break;
                } else if (sum == target) {
                    res.clear();
                    for (int k = i; k <= j; ++k) {
                        res.emplace_back(k);
                    }
                    vec.emplace_back(res);
                    sum = 0;
                    break;
                }
            }
        }
        return vec;
    }
};
```



**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼šå¤–å±‚éœ€è¦æšä¸¾ $\lfloor\frac{\textit{target}}{2}\rfloor$æ¬¡ï¼Œå†…å±‚åˆ¤æ–­æœ€å¤šä¸ä¼šè¶…è¿‡ $O(\sqrt{\textit{target}})$ çš„æ—¶é—´å¤æ‚åº¦ï¼Œå› ä¸ºæˆ‘ä»¬è€ƒè™‘ä» $1$ å¼€å§‹ç´¯åŠ åˆ° $\sqrt{\textit{target}}$ ï¼Œç”±æ±‚å’Œå…¬å¼å¯ä»¥å¾—


$$
\frac{(1+\sqrt{\textit{target}})*(\sqrt{\textit{target}})}{2}=\textit{target}+\frac{\sqrt{\textit{target}}}{2}> \textit{target}
$$

â€‹       è€Œå¦‚æœç´¯åŠ åˆ° $\sqrt{\textit{target}}-1$ ï¼Œç”±æ±‚å’Œå…¬å¼å¯ä»¥å¾—

$$
\frac{(1+\sqrt{\textit{target}}-1)*(\sqrt{\textit{target}}-1)}{2}=\textit{target}-\frac{\sqrt{\textit{target}}}{2}< \textit{target}
$$


â€‹       æ‰€ä»¥æœ€å¤šç´¯åŠ åˆ° $\sqrt{\textit{target}}$ ï¼Œè€Œä»¥åä» $2,3,\cdots$ å¼€å§‹çš„æ•°ç´¯åŠ çš„é•¿åº¦å¿…ç„¶ä¹Ÿä¸ä¼šè¶…è¿‡ $O(\sqrt{\textit{target}})$çš„       æ—¶é—´å¤æ‚åº¦ã€‚æœ€åæ€»æ—¶é—´å¤æ‚åº¦ä¸ºå†…å¤–å±‚å¾ªç¯å¤æ‚åº¦ç›¸      	   ä¹˜ï¼Œå³ $O(\textit{target}\sqrt{\textit{target}})$

- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ ï¼Œé™¤äº†ç­”æ¡ˆæ•°ç»„åªéœ€è¦å¸¸æ•°çš„ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡ã€‚



**æ–¹æ³•äºŒï¼šæšä¸¾ + æ•°å­¦ä¼˜åŒ–**
æ–¹æ³•ä¸€åœ¨æšä¸¾æ¯ä¸ªæ­£æ•´æ•°ä¸ºèµ·ç‚¹åˆ¤æ–­çš„æ—¶å€™æ˜¯æš´åŠ›ä»èµ·ç‚¹å¼€å§‹ç´¯åŠ  $\textit{sum}$ å’Œåˆ¤æ–­æ˜¯å¦ç­‰äº $\textit{target}$ã€‚ä½†æ³¨æ„åˆ°ï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“èµ·ç‚¹ $x$ å’Œç»ˆç‚¹ $y$ ï¼Œé‚£ä¹ˆ $x$ ç´¯åŠ åˆ° $y$ çš„å’Œç”±æ±‚å’Œå…¬å¼å¯ä»¥çŸ¥é“æ˜¯ $\frac{(x+y)*(y-x+1)}{2}$  ï¼Œé‚£ä¹ˆé—®é¢˜å°±è½¬åŒ–ä¸ºäº†æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ­£æ•´æ•° $y(y>x)$ ï¼Œæ»¡è¶³ç­‰å¼
$$
\frac{(x+y)*(y-x+1)}{2}=\textit{target}
$$
è½¬åŒ–ä¸€ä¸‹å˜æˆ

$$
y^2+y-x^2+x-2*\textit{target}=0
$$
è¿™æ˜¯ä¸€ä¸ªå…³äº $y$ çš„ä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹ï¼Œå…¶ä¸­ $a=1,b=1,c=-x^2+x-2*\textit{target}$ç›´æ¥å¥—ç”¨æ±‚æ ¹å…¬å¼å³å¯ $O(1)$è§£å¾— $y$ ï¼Œåˆ¤æ–­æ˜¯å¦æ•´æ•°è§£éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š

- åˆ¤åˆ«å¼ $b^2-4ac$ å¼€æ ¹éœ€è¦ä¸ºæ•´æ•°
- æœ€åçš„æ±‚æ ¹å…¬å¼çš„åˆ†å­éœ€è¦ä¸ºå¶æ•°ï¼Œå› ä¸ºåˆ†æ¯ä¸º $2$
  

**c++ä»£ç ï¼š**(æ‰§è¡Œç”¨æ—¶4msï¼Œå‡»è´¥66.56%ï¼Œå†…å­˜æ¶ˆè€—7Mï¼Œå‡»è´¥23.15%ï¼‰

```c++
class Solution {
public:
    vector<vector<int>> findContinuousSequence(int target) {
        vector<vector<int>> vec;
        vector<int> res;
        int sum = 0, limit = (target - 1) / 2; // (target - 1) / 2 ç­‰æ•ˆäº target / 2 ä¸‹å–æ•´
        for (int x = 1; x <= limit; ++x) {
            long long delta = 1 - 4 * (x - 1ll * x * x - 2 * target);
            if (delta < 0) {
                continue;
            }
            int delta_sqrt = (int)sqrt(delta + 0.5);
            if (1ll * delta_sqrt * delta_sqrt == delta && (delta_sqrt - 1) % 2 == 0) {
                int y = (-1 + delta_sqrt) / 2; // å¦ä¸€ä¸ªè§£(-1-delta_sqrt)/2å¿…ç„¶å°äº0ï¼Œä¸ç”¨è€ƒè™‘
                if (x < y) {
                    res.clear();
                    for (int i = x; i <= y; ++i) {
                        res.emplace_back(i);
                    }
                    vec.emplace_back(res);
                }
            }
        }
        return vec;
    }
};
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼šç”±äºæšä¸¾ä»¥ååªéœ€è¦ $O(1)$ çš„æ—¶é—´åˆ¤æ–­ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸ºæšä¸¾èµ·ç‚¹çš„å¤æ‚åº¦$O(\textit{target})$ ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ ï¼Œé™¤äº†ç­”æ¡ˆæ•°ç»„åªéœ€è¦å¸¸æ•°çš„ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡ã€‚




**æ–¹æ³•ä¸‰ï¼šåŒæŒ‡é’ˆ**
æˆ‘ä»¬ç”¨ä¸¤ä¸ªæŒ‡é’ˆ $l$ å’Œ $r$ è¡¨ç¤ºå½“å‰æšä¸¾åˆ°çš„ä»¥ $l$ä¸ºèµ·ç‚¹åˆ° $r$ çš„åŒºé—´ï¼Œ$\textit{sum}$ è¡¨ç¤º $[l,r]$ çš„åŒºé—´å’Œï¼Œç”±æ±‚å’Œå…¬å¼å¯ $O(1)$æ±‚å¾—ä¸º $\textit{sum}=\frac{(l+r)*(r-l+1)}{2}$ï¼Œèµ·å§‹ $l=1,r=2$ã€‚

ä¸€å…±æœ‰ä¸‰ç§æƒ…å†µï¼š

- å¦‚æœ $\textit{sum}<\textit{target}$ åˆ™è¯´æ˜æŒ‡é’ˆ $r$ è¿˜å¯ä»¥å‘å³æ‹“å±•ä½¿å¾— $sum$ å¢å¤§ï¼Œæ­¤æ—¶æŒ‡é’ˆ $r$ å‘å³ç§»åŠ¨ï¼Œå³ `r+=1`
- å¦‚æœ $sum>target$åˆ™è¯´æ˜ä»¥ $l$ ä¸ºèµ·ç‚¹ä¸å­˜åœ¨ä¸€ä¸ª $r$ä½¿å¾— $sum=target$ ï¼Œæ­¤æ—¶è¦æšä¸¾ä¸‹ä¸€ä¸ªèµ·ç‚¹ï¼ŒæŒ‡é’ˆ $l$ å‘å³ç§»åŠ¨ï¼Œå³`l+=1`
- å¦‚æœ $\textit{sum}==\textit{target}$ åˆ™è¯´æ˜æˆ‘ä»¬æ‰¾åˆ°äº†ä»¥ $l$ä¸ºèµ·ç‚¹å¾—åˆæ³•è§£ $[l,r]$ ï¼Œæˆ‘ä»¬éœ€è¦å°† $[l,r]$ çš„åºåˆ—æ”¾è¿›ç­”æ¡ˆæ•°ç»„ï¼Œä¸”æˆ‘ä»¬çŸ¥é“ä»¥ ll ä¸ºèµ·ç‚¹çš„åˆæ³•è§£æœ€å¤šåªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥éœ€è¦æšä¸¾ä¸‹ä¸€ä¸ªèµ·ç‚¹ï¼ŒæŒ‡é’ˆ $l$ å‘å³ç§»åŠ¨ï¼Œå³ `l+=1`

ç»ˆæ­¢æ¡ä»¶å³ä¸º $l>=r$çš„æ—¶å€™ï¼Œè¿™ç§æƒ…å†µçš„å‘ç”ŸæŒ‡é’ˆ $r$ ç§»åŠ¨åˆ°äº†$\lfloor\frac{\textit{target}}{2}\rfloor+1$çš„ä½ç½®ï¼Œå¯¼è‡´ $l<r$ çš„æ—¶å€™åŒºé—´å’Œå§‹ç»ˆå¤§äº $target$ ã€‚

æ­¤æ–¹æ³•å…¶å®æ˜¯å¯¹æ–¹æ³•ä¸€çš„ä¼˜åŒ–ï¼Œå› ä¸ºæ–¹æ³•ä¸€æ˜¯æ²¡æœ‰è€ƒè™‘åŒºé—´ä¸åŒºé—´çš„ä¿¡æ¯å¯ä»¥å¤ç”¨ï¼Œåªæ˜¯å•çº¯çš„æšä¸¾èµ·ç‚¹ï¼Œç„¶åä»èµ·ç‚¹å¼€å§‹ç´¯åŠ ï¼Œè€Œè¯¥æ–¹æ³•å°±æ˜¯è€ƒè™‘åˆ°äº†å¦‚æœå·²çŸ¥ $[l,r]$ çš„åŒºé—´å’Œç­‰äº $\textit{target}$ ï¼Œé‚£ä¹ˆæšä¸¾ä¸‹ä¸€ä¸ªèµ·ç‚¹çš„æ—¶å€™ï¼ŒåŒºé—´ $[l+1,r]$ çš„å’Œå¿…ç„¶å°äº $\textit{target}$ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†ä» $l+1$å†å¼€å§‹é‡å¤æšä¸¾ï¼Œè€Œæ˜¯ä» $r+1$å¼€å§‹æšä¸¾ï¼Œå……åˆ†çš„åˆ©ç”¨äº†å·²çŸ¥çš„ä¿¡æ¯æ¥ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦ã€‚

**c++ä»£ç ï¼š**(æ‰§è¡Œç”¨æ—¶0msï¼Œå‡»è´¥100.00%ï¼Œå†…å­˜æ¶ˆè€—7Mï¼Œå‡»è´¥16.98%ï¼‰

```c++
class Solution {
public:
    vector<vector<int>> findContinuousSequence(int target) {
        vector<vector<int>>vec;
        vector<int> res;
        for (int l = 1, r = 2; l < r;){
            int sum = (l + r) * (r - l + 1) / 2;
            if (sum == target) {
                res.clear();
                for (int i = l; i <= r; ++i) {
                    res.emplace_back(i);
                }
                vec.emplace_back(res);
                l++;
            } else if (sum < target) {
                r++;
            } else {
                l++;
            }
        }
        return vec;
    }
};
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼šç”±äºä¸¤ä¸ªæŒ‡é’ˆç§»åŠ¨å‡å•è°ƒä¸å‡ï¼Œä¸”æœ€å¤šç§»åŠ¨ $\lfloor\frac{\textit{target}}{2}\rfloor$æ¬¡ï¼Œå³æ–¹æ³•ä¸€æåˆ°çš„æšä¸¾çš„ä¸Šç•Œï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º $O(\textit{target})$ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ ï¼Œé™¤äº†ç­”æ¡ˆæ•°ç»„åªéœ€è¦å¸¸æ•°çš„ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡ã€‚




<center>â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³æ€» ç»“â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³â³</center>

###### æ€»ç»“ï¼š

å®˜æ–¹é¢˜è§£æä¾›äº†å¤šç§è§£æ³•ï¼Œæˆ‘ç”¨çš„æ˜¯æ–¹æ³•ä¸€æšä¸¾åŠ æš´åŠ›è§£æ³•ï¼Œæ–¹æ³•ä¸‰ç”¨åŒæŒ‡é’ˆè¡¨ç¤ºåŒºé—´è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒå·§å¦™ï¼Œå€¼å¾—å­¦ä¹ ã€‚